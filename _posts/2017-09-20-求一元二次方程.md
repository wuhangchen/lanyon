---
layout: post
title: 求一元二次方程
---

求解一元二次方程一般初中生都会求解，但是我们使用程序语言来求解，加上一些限定条件，是不是很容易呢？
我们来看这道网上的题：
![](https://i.imgur.com/vbRF5SG.png)  
  
大致的浏览这道题，我们会发现，这道题很简单嘛，唯一的要求就是精度的问题嘛，一个if语句就能够完成的嘛。  
于是我们在细致的看这道题，总共2300提交，结果成功了150次，和其他的问题还是有很大的差距。可以用有趣来形容了，接下来我们来解决这道满足题目要求的题，基本的思想是下面这样：    
- 利用if语句完成对解的分类  
- C语言中打印出浮点数的时候，使用.f控制形式，并非.lf（这是一种错误的写法）当然在C++中打印格式需要用到C++标准库中的函数，因此使用C格式控制语句可能是大多数学生的选择。  
- 满足题目的要求，使用双精度浮点数更佳。 
- 输出要满足从小到大的次序进行输出跟，意味我们需要比较大小。  
 
我们就写出下面的代码：  
```    

//求解一元二次方程解的代码  

#include <iostream>  
#include<cstdio>
#include<cmath>
using std::cin;  
using std::cout;  
int main()  
{      

    double a,b,c,x1,x2;  
    while(cin>>a>>b>>c){
    //2个根相等的情况
    if(b*b==4*a*c){
        x1 = x2 = (-b + sqrt(b*b-4*a*c))/(2*a);
        printf("x1=x2=%.5f",x1);
    }else if(b*b>4*a*c){//含有2个实根
        //计算出2个根
        x1 = (-b + sqrt(b*b-4*a*c))/(2*a);
        x2 = (-b - sqrt(b*b-4*a*c))/(2*a);
        //比较大小
        if(x1>x2){
            double temp = x2;
            x2 = x1;
            x1 = temp;
            printf("x1=%.5f;x2=%.5f",x1,x2);
            return 0;
        }if(x1<x2){
            printf("x1=%.5f;x2=%.5f",x1,x2);
            return 0;
            }

        }else{                        //是否考虑含有虚根的存在？
            cout<<"No answer!";
            return 0;
        }
    }
    return 0;
}  

```  
    
然后vim中编译，运行，完美的结果，而且符合答案，结果一提交上去，就被告知失败(内心一万句。。。)。  

![](https://i.imgur.com/EQKl5aD.png)  

## 回想  
上面的code我们可能会想很正常，但是慢慢的想来，可读性较差：  
1. 没有养成一种模块化的思想，只知道一味的写下去，当里面出现bug的时候，让人难改。导致的结果是不能够及时的更改，可读性较差。  
2. 虽然使用了If的语句，看试程序很有理，实际上很难一下明白来龙去脉，要写出让人一看就懂的code是一种很强的能力。  
## 再次Code  
我这次写出了下面的代码，分层次的编写：  
```  
#include<iostream>
#include<cmath>
#include<cstdio>

using std::cin;  
using std::cout;  
//函数模板
template<typename T>
T min(T a, T b) { return a<b ? a : b; }  
template<typename T2>
T2 max(T2 a, T2 b) { return a>b ? a : b; }  

int main()  
{	  
//abc为一元方程的系数,x1,x2为方程的根,b_sq,four_a_c为计算过程中的参数。  

	double a, b, c, x1, x2, b_sq, four_a_c;
	cin >> a >> b >> c;
	b_sq = b*b;
	four_a_c = 4 * a*c;
	//无根
	if (b_sq<four_a_c) {
		cout << "No answer!";
	}
	else {
		//计算2个根
		x1 = (-b + sqrt(b_sq - four_a_c)) / (2 * a);
		x2 = (-b - sqrt(b_sq - four_a_c)) / (2 * a);

		if (b_sq>four_a_c) {
			//含有2个实根
			printf("x1=%.5f;x2=%.5f", min(x1, x2), max(x1, x2));
		}
		else {
			//含有一个根
			printf("x1=x2=%.5f", x1);
		}
	}
	return 0;
}  
```  
当我在次提交然后结果是：  
![](https://i.imgur.com/hqtNEc2.png)  
## 反思  
1. 该网站的g++编译器没有说明版本是多少，用C++编写在不同的编译器的效果具有很大的差异性。
2. 作为一名vim党，不得不说VS的巨大成功。（逃


